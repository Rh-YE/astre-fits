# astre.fits - 一款简易的fits文件查看器

## 项目简介

astre.fits，（astre源于法语的天体一词），是一个专门用于查看和分析FITS（Flexible Image Transport System）文件的VSCode扩展，当然也支持Cursor编辑器。目前它旨在提供小型且基础的FITS文件的解析和可视化功能（包括图像、光谱绘制、表格展示），使天文学家和研究人员能够方便地在VSCode中快速查看迅速产生的的FITS文件数据。当前版本可以实现快速查看这一基本的需求，更高性能的或将在未来版本中提供，欢迎在Github仓库中提交Issue或者贡献您的解决方案。

当前版本为完全使用Cursor+AI模型编写实现，作者负责提供文档和拆解需求给AI生成代码后进行测试。未来版本将会提高人工编码的参与度以提升扩展的性能和兼容性以及可阅读性。

## 界面功能

当用户打开fits文件，将会自动打开一个窗口展示fits内的数据。用户可以自由切换HDU以展示数据。本扩展支持ImageHDU、BinTableHDU、TableHDU（即ASCII表格），暂时不支持PrimaryHDU中的光谱和表格数据。当fits文件包含扩展HDU时，会自动打开第一个扩展HDU的数据。

当前展示分为三种模式：

### 图像模式
- 鼠标悬停显示当前位置的坐标、WCS坐标（如有）、图片原始的像素值（注：显示时图像已被归一化至0-1范围）
- 支持非线性变换(基于DS9)
- 提供完整的Fits头文件信息显示
- 支持切换通道（Axes）顺序以显示DataCube顺序

### 光谱模式
- 光谱图像智能绘制，支持自动/手动模式
- 丰富的交互功能：
  - 支持拖动和缩放
  - 矩形框选择放大区域
  - Ctrl＋滚轮 实现x轴缩放
  - Shift＋滚轮 实现y轴缩放
- 灵活的数据展示：
  - 可选择波长/流量列进行绘制
  - 支持切换显示当前光谱的表格数据
  - 完整的Fits头文件信息显示
- 未来计划支持蒙版和误差的绘制

### 表格模式
- 清晰的表格数据展示
- 支持表格排序功能

## 局限

1. 性能
   - 部分跳变很大的光谱在拖动时可能显示会有问题
   - 图像切换轴顺序时不能正确应用当前选中的非线性变换等内容
   - Datacube仍然不能完全支持，问题在于头文件解析上以及轴选择的不便捷
   - 可能不完备的临时文件销毁机制
   - 大文件加载可能会较慢，如HST的大视场图片加载较慢且难以拖动，这是受限于Web界面的固有限制
   - 大型FITS文件的加载和解析可能会占用较多内存
   - 复杂表格数据的渲染可能会有性能瓶颈

2. 兼容性
   - 部分FITS扩展格式可能不支持（已在适配中）
   - 不支持压缩格式的FITS
   - 已知有HST cos的光谱可能无法正确展示表格

## 安装使用

1. 在VSCode扩展市场搜索"Astre Fits"
2. 点击安装
3. 安装后可直接打开.fits或.fit文件
4. 扩展会自动激活并显示文件内容

## 参考

1. Definition of the Flexible Image Transport System (FITS) Version 4.0
2. SAOImageDS9: https://ds9.si.edu/doc/ref/how.html

## 贡献指南

欢迎提交问题报告和功能建议到项目的GitHub仓库。

## 致谢

本项目的1.0.0版本完全使用Cursor及其支持的Claude 3.5 Sonet（主要）、Claude 3.7 Sonet、Deepseek R1、O3 mini模型进行从0开发，作者负责监督和测试，并恰当地使用FITS定义来约束代码编写。这种开发方式极大地提高了开发效率，同时保证了代码质量。

## 许可证

本项目遵循GPL3.0许可证。 

